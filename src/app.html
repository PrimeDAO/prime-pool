<template>
  <banner></banner>
  <!-- TODO: get animation working -->
  <modalscreen on-off.to-view="onOff" message.to-view="modalMessage">
    <div class="appWrapper animated-page au-animate">
      <div class="logo" click.delegate="goto('http://primedao.io')">
        <img src="/logo.svg" /> PrimeDAO
      </div>
      <div class="appHeader">
        <div class="networkFeedback">
          <networkfeedback></networkfeedback>
        </div>
        <div class="connectButton">
          <connectbutton></connectbutton>
        </div>
      </div>
      <div class="sidebarContainer">
        <div class="sidebar">
          <div class="menuitems">
            <template repeat.for="row of router.navigation">
              <a class="item ${row.isActive ? 'active' : ''}"
                href.bind="row.href">
                <div class="text"><img src="${row.settings.icon}" />${row.title}</div>
              </a>
              <div if.to-view="row.config.name === 'pools'">
                <div if.to-view="$parent.initializing" class="initialize">
                  <loading-dots></loading-dots>
                </div>
                <div else class="poolItems">
                  <template repeat.for="pool of $parent.pools">
                    <a if.to-view="!pool.preview"
                      class="item"
                      href="#"
                      click.delegate="gotoPool(pool)">
                      <div class="text"><img src="/PoolMenuBullet.svg" />${pool.name}</div>
                    </a>
                  </template>
                </div>
              </div>
            </template>
          </div>
          <div class="appFooter">
            <div class="links">
              <a href="#" click.delegate="contactUs()" target="_blank" rel="noopener noreferrer">Contact Us</a>
              <a href="https://docs.primedao.io/primedao/faqs" target="_blank" rel="noopener noreferrer">PrimeDAO FAQ</a>
            </div>
            <div class="social">
              <a href="https://discord.gg/x8v59pG" target="_blank" rel="noopener noreferrer">
                <img src="/FOOTER_SOCIAL_DISCORD-dark.svg" />
              </a>
              <a href="https://twitter.com/PrimeDAO_?s=09" target="_blank" rel="noopener noreferrer">
                <img src="/FOOTER_SOCIAL_TWITTER-dark.svg" />
              </a>
              <a href="https://medium.com/primedao" target="_blank" rel="noopener noreferrer">
                <img src="/FOOTER_SOCIAL_MEDIUM-dark.svg" />
              </a>
              <a href="https://t.me/primedao" target="_blank" rel="noopener noreferrer">
                <img src="/FOOTER_SOCIAL_TELEGRAM-dark.svg" />
              </a>
            </div>
            <div class="logo">
              <img src="/logo-white.svg" />
              <div class="text">&copy; 2020 Prime Development Foundation</div>
            </div>
          </div>
        </div>
      </div>
      <div class="mainContent">
        <router-view></router-view>
      </div>
    </div>
  </modalscreen>
</template>
